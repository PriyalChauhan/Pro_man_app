<%= form_with model: [ @project,@project.tasks.create ]  do |form| %>
  <div class="form">    
    <div class = "float-end" >
      <%#= select_tag('label', options_from_collection_for_select(Label.all, 'id', 'label'), prompt: "Label") %>
    </div>
    
    <div class="mb-3">
      <%= form.label :title %>
      <%= form.text_field :title, class: "border-primary w-25 form-control" %>
    </div>
   
    <div class="mb-3">
      <%= form.label :Label %>
      <%= form.select :label, Task.labels.keys,{}, {class: "form-control w-25 border-primary"}%>
    </div>

    <div class="mb-3">
      <%= form.label :status %>
      <%= form.select :status, ['Not Started', 'Doing', 'Done'],{}, {class: "form-control w-25 border-primary"}%>
    </div>
    
    <div class="mb-3">
      <%= form.label :reporter %>
      <%#<%= collection_select(:reporter_ids, :id, User.all, :id, :email, {}, {multiple: true}) %>
      <%= form.select :reporter_id, User.all.map{|u| [u.email, u.id]}, {}, {class: "form-control w-25 border-primary"}  %>
      <%#<%= form.select :reporter_id, User.pluck(:email) %>
    </div>
    
    <div class="mb-3">
      <%#= form.label :documents %>
      <%= form.file_field :documents, multiple: true, class: "form-control w-25 border-primary" %>
    </div>

    <%= form.hidden_field :project_id, value: @project.id %>
    <%= form.hidden_field :assignee_id, value: current_user.id %>

    <div class="mb-3">
      <%= form.submit(class:"btn btn-primary") %>
    </div>
  </div>
<% end %>

